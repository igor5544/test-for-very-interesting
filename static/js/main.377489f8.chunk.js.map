{"version":3,"sources":["components/common/Loader/loader.module.css","components/AuthPage/authPage.module.css","components/BookItem/booksItem.module.css","firebase/firebase.js","utils/validators.js","redux/auth-reducer.js","redux/app-reducer.js","redux/selectors.js","components/BookItem/BookItem.js","components/BooksList/BooksList.js","components/common/Loader/Loader.js","components/LibraryPage/LibraryPage.js","hoc/withAuthRedirect.js","redux/library-reducer.js","components/LibraryPage/LibraryPageContainer.js","components/common/FormContols/FormControls.js","components/AuthForm/AuthForm.js","components/AuthPage/AuthPage.js","components/AuthPage/AuthPageContainer.js","components/BookForm/BookForm.js","components/BookPage/BookPage.js","components/BookPage/BookPageContainer.js","components/Headerr/Header.js","components/Headerr/HeaderContainer.js","App.js","AppContainer.js","reportWebVitals.js","redux/redux-store.js","index.js","components/Headerr/header.module.css","components/LibraryPage/libraryPage.module.css","components/common/FormContols/formsControls.module.css","components/AuthForm/authForm.module.css","components/BookForm/bookForm.module.css"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","minLenght","db","firestore","authAPI","email","collection","doc","toLowerCase","get","then","response","password","set","libraryAPI","ISBN","title","authors","date","delete","SET_USER_DATA","TOGGLE_IS_SENDING","initialState","isAuth","isSending","setUserData","type","toggleIsSending","setLocalStorage","localStorage","setItem","authFuncCreator","action","dispatch","a","registrationFunc","exists","stopSubmit","_error","catch","error","login","data","registration","authReducer","state","INITIALIZED_SUCCESS","initialized","appReducer","getIsAuth","auth","gerIsSendingAuth","getEmail","getIsFetching","library","isFetching","getBooksList","books","getDeletingInProgress","deletingInProgress","getActiveBook","activeBook","getIsSendingBook","getSuccessSend","successSend","getInitialized","initial","BooksItem","bookInfo","deleteBook","className","s","wrapper","list","item","field","value","controls","to","control","disabled","some","onClick","BooksList","booksItems","forEach","book","push","id","Loader","LibraryPage","size","alert","mapStateToPropsRedirect","withAuthRedirect","Component","RedirectComponent","this","props","React","connect","SET_BOOKS","SET_ACTIVE_BOOK","TOGGLE_IS_FETCHING","TOGGLE_IS_DELETING_PROGRESS","TOGGLE_SUCCESS_SEND","setActiveBooks","toggleIsFetching","toggleSuccessSend","toggleIsDeletingProgress","setBook","targetISMN","libraryReducer","filter","LibraryPageAPIComponent","toggleSubscribeBooks","mapDispatchToProps","onSnapshot","compose","Input","input","meta","label","restProps","hasError","touched","htmlFor","required","undefined","passwordsMatch","allValues","passwordPattern","test","emailPattern","authorsPattern","bookPattern","dateNotFuture","Date","onlyNumbers","ISBNDateControl","formatChangeDate","formDate","length","minLength9","AuthForm","isLogin","handleSubmit","passwordValidators","loginValidators","form","onSubmit","Field","name","placeholder","component","validate","autoComplete","LoginForm","reduxForm","RegistrationForm","AuthPage","useState","setIsLogin","btnText","onlyRedaction","readOnly","BookPage","addNewBook","updateBookInfo","initialValues","BookPageAPIComponent","match","params","getBookInfo","console","log","getActualBookData","prevProps","setTimeout","withRouter","Header","logout","header","btn","removeItem","App","path","exact","render","AppApiComponent","getItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducers","combineReducers","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"+GACAA,EAAOC,QAAU,CAAC,WAAW,2B,oBCA7BD,EAAOC,QAAU,CAAC,aAAa,+B,yCCA/BD,EAAOC,QAAU,CAAC,QAAU,2BAA2B,MAAQ,yBAAyB,KAAO,wBAAwB,KAAO,wBAAwB,MAAQ,yBAAyB,MAAQ,yBAAyB,SAAW,4BAA4B,QAAU,6B,qLCCzQC,IAASC,cAAc,CACrBC,OAAQ,0CACRC,WAAY,6CACZC,UAAW,6BACXC,cAAe,yCACfC,kBAAmB,eACnBC,MAAO,8CAGT,ICPgCC,EDO1BC,EAAKT,IAASU,YAEPC,EAAU,SACbC,GACN,OAAOH,EAAGI,WAAW,SAASC,IAAIF,EAAMG,eAAeC,MAAMC,MAAK,SAAAC,GAAQ,OACxEA,MAHOP,EAAU,SAMbC,EAAOO,GACb,OAAOV,EAAGI,WAAW,SAASC,IAAIF,EAAMG,eAAeK,IAAI,CAAER,QAAOO,aAAYF,MAAK,kBACnF,MAKOI,EAAa,SAChBC,GACN,OAAOb,EAAGI,WAAW,SAASC,IAAIQ,GAAMN,MAAMC,MAAK,SAAAC,GAAQ,OACzDA,MAHOG,EAAa,SAMhBE,EAAOC,EAASC,EAAMH,GAC5B,OAAOb,EAAGI,WAAW,SAASC,IAAIQ,GAAMF,IAAI,CAAEG,QAAOC,UAASC,OAAMH,SAAQL,MAAK,kBAC/E,MAROI,EAAa,WAYtB,OAAOZ,EAAGI,WAAW,UAZZQ,EAAa,SAcbC,GACT,OAAOb,EAAGI,WAAW,SAASC,IAAIQ,GAAMI,SAAST,MAAK,kBACpD,M,QEvCAU,EAAgB,gBAChBC,EAAoB,oBAEpBC,EAAe,CACnBC,QAAQ,EACRC,WAAW,EACXnB,MAAO,MAqBIoB,EAAc,SAACF,EAAQlB,GAClC,MAAO,CACLqB,KAAMN,EACNG,SACAlB,UAISsB,EAAkB,SAACH,GAC9B,MAAO,CACLE,KAAML,EACNG,cAYEI,EAAkB,SAACvB,GACvBwB,aAAaC,QAAQ,OAAQzB,IAOzB0B,EAAkB,SAAAC,GAAM,OAAI,SAAC3B,EAAOO,GAAR,8CAAqB,WAAMqB,GAAN,eAAAC,EAAA,6DACrDD,EAASN,GAAgB,IAD4B,SAE9BvB,EAAgBC,EAAOO,GAFO,OAE/CD,EAF+C,OAIrDqB,EAAO3B,EAAOO,EAAUD,EAAUsB,GAElCA,EAASN,GAAgB,IAN4B,2CAArB,wDAkB5BQ,EAAgB,uCAAG,WAAO9B,EAAOO,EAAUD,EAAUsB,GAAlC,SAAAC,EAAA,yDACnBvB,EAASyB,QACXH,EAASI,YAAW,eAAgB,CAAEC,OAAQ,iCAG3C3B,EAASyB,OALS,gCAMfhC,EAAgBC,EAAOO,GAAU2B,OAAM,SAAAC,GAC3C,OAAOP,EAASI,YAAW,eAAgB,CAAEC,OAAQE,QAPlC,OAUrBP,EAASR,GAAY,EAAMpB,IAC3BuB,EAAgBvB,GAXK,2CAAH,4DAeToC,EAAQV,GAxBH,SAAC1B,EAAOO,EAAUD,EAAUsB,GACvCtB,EAASyB,QAAUzB,EAAS+B,OAAO9B,WAAaA,GAGnDqB,EAASR,GAAY,EAAMpB,IAC3BuB,EAAgBvB,IAHhB4B,EAASI,YAAW,QAAS,CAAEC,OAAQ,oCAuB9BK,EAAeZ,EAAgBI,GAO7BS,EA1FK,WAAmC,IAAlCC,EAAiC,uDAAzBvB,EAAcU,EAAW,uCACpD,OAAQA,EAAON,MACb,KAAKN,EACH,OAAO,YAAC,eACHyB,GADL,IAEEtB,OAAQS,EAAOT,OACflB,MAAO2B,EAAO3B,QAElB,KAAKgB,EACH,OAAO,YAAC,eACHwB,GADL,IAEErB,UAAWQ,EAAOR,YAEtB,QACE,OAAOqB,ICxBPC,EAAsB,sBAEtBxB,EAAe,CACnByB,aAAa,GA2BAC,EAxBI,WAAmC,IAAlCH,EAAiC,uDAAzBvB,EAAcU,EAAW,uCACnD,OAAQA,EAAON,MACb,KAAKoB,EACH,OAAO,YAAC,eACHD,GADL,IAEEE,aAAa,IAEjB,QACE,OAAOF,IChBAI,EAAY,SAACJ,GACxB,OAAOA,EAAMK,KAAK3B,QAGP4B,EAAmB,SAACN,GAC/B,OAAOA,EAAMK,KAAK1B,WAGP4B,EAAW,SAACP,GACvB,OAAOA,EAAMK,KAAK7C,OAGPgD,EAAgB,SAACR,GAC5B,OAAOA,EAAMS,QAAQC,YAGVC,EAAe,SAACX,GAC3B,OAAOA,EAAMS,QAAQG,OAGVC,EAAwB,SAACb,GACpC,OAAOA,EAAMS,QAAQK,oBAGVC,EAAgB,SAACf,GAC5B,OAAOA,EAAMS,QAAQO,YAGVC,EAAmB,SAACjB,GAC/B,OAAOA,EAAMS,QAAQ9B,WAGVuC,EAAiB,SAAClB,GAC7B,OAAOA,EAAMS,QAAQU,aAGVC,EAAiB,SAACpB,GAC7B,OAAOA,EAAMqB,QAAQnB,a,uDCeRoB,GAhDG,SAAC,GAAkD,IAAhDC,EAA+C,EAA/CA,SAAUC,EAAqC,EAArCA,WAAYV,EAAyB,EAAzBA,mBACzC,OACE,0BAASW,UAAWC,KAAEC,QAAtB,UACE,oBAAIF,UAAWC,KAAEvD,MAAjB,SACGoD,EAASpD,QAEZ,qBAAIsD,UAAWC,KAAEE,KAAjB,UACE,qBAAIH,UAAWC,KAAEG,KAAjB,UACE,sBAAMJ,UAAWC,KAAEI,MAAnB,4BAGA,sBAAML,UAAWC,KAAEK,MAAnB,SACGR,EAASlD,UAGd,qBAAIoD,UAAWC,KAAEG,KAAjB,UACE,sBAAMJ,UAAWC,KAAEI,MAAnB,sBAGA,sBAAML,UAAWC,KAAEK,MAAnB,SACGR,EAASnD,aAGd,qBAAIqD,UAAWC,KAAEG,KAAjB,UACE,sBAAMJ,UAAWC,KAAEI,MAAnB,mBAGA,sBAAML,UAAWC,KAAEK,MAAnB,SACGR,EAASrD,aAIhB,sBAAKuD,UAAWC,KAAEM,SAAlB,UACE,cAAC,KAAD,CAASC,GAAE,gBAAWV,EAASrD,MAAQuD,UAAS,0BAAqBC,KAAEQ,SAAvE,kBAGA,wBACET,UAAS,yBAAoBC,KAAEQ,SAC/BC,SAAUrB,EAAmBsB,MAAK,SAAAlE,GAAI,OAAIA,IAASqD,EAASrD,QAC5DmE,QAAS,kBAAMb,EAAWD,EAASrD,OAHrC,2BCrBOoE,GAhBG,SAAC,GAA+C,IAA7C1B,EAA4C,EAA5CA,MAAOY,EAAqC,EAArCA,WAAYV,EAAyB,EAAzBA,mBAChCyB,EAAa,GAQnB,OANA3B,EAAM4B,SAAQ,SAAAC,GACZF,EAAWG,KACT,cAAC,GAAD,CAAWnB,SAAUkB,EAAK5C,OAAsB2B,WAAYA,EAAYV,mBAAoBA,GAArD2B,EAAKE,QAK9C,6BACGJ,K,qBCXMK,GAAS,WACpB,OACE,sBAAKnB,UAAWC,KAAE,YAAlB,UACE,wBACA,wBACA,wBACA,4BCyBSmB,GA5BK,SAAC,GAA2D,IAAzDjC,EAAwD,EAAxDA,MAAOF,EAAiD,EAAjDA,WAAYc,EAAqC,EAArCA,WAAYV,EAAyB,EAAzBA,mBACpD,OACE,yBAASW,UAAU,UAAnB,SACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,QAAd,qBAGA,cAAC,KAAD,CAASQ,GAAG,QAAQR,UAAS,cAASC,KAAE,YAAxC,0BAIEhB,EACE,cAAC,GAAD,IACA,mCAEIE,EAAMkC,KAAO,EACX,cAAC,GAAD,CAAWlC,MAAOA,EAAOY,WAAYA,EAAYV,mBAAoBA,IACrE,mBAAGW,UAAS,8BAAyBC,KAAEqB,OAAvC,4CClBZC,GAA0B,SAAChD,GAC/B,MAAO,CACLtB,OAAQ0B,EAAUJ,KAITiD,GAAmB,SAACC,GAAe,IAExCC,EAFuC,uKAIzC,OAAKC,KAAKC,MAAM3E,OAIT,cAACwE,EAAD,eAAeE,KAAKC,QAHlB,cAAC,IAAD,CAAUpB,GAAI,cALkB,GAEbqB,IAAMJ,WAUtC,OAAOK,YAAQP,GAARO,CAAiCJ,I,UCpBpCK,GAAY,YACZC,GAAkB,iBAClBC,GAAqB,qBACrBC,GAA8B,8BAC9BnF,GAAoB,oBACpBoF,GAAsB,sBAEtBnF,GAAe,CACnBmC,MAAO,GACPF,YAAY,EACZI,mBAAoB,GACpBE,WAAY,GACZrC,WAAW,EACXwC,aAAa,GAiDF0C,GAAiB,SAACtC,GAC7B,MAAO,CACL1C,KAAM4E,GACNlC,aAISuC,GAAmB,SAACpD,GAC/B,MAAO,CACL7B,KAAM6E,GACNhD,eAIS5B,GAAkB,SAACH,GAC9B,MAAO,CACLE,KAAML,GACNG,cAISoF,GAAoB,SAAC5C,GAChC,MAAO,CACLtC,KAAM+E,GACNzC,gBAIS6C,GAA2B,SAACtD,EAAYxC,GACnD,MAAO,CACLW,KAAM8E,GACNjD,aACAxC,SAaS+F,GAAU,SAAC9F,EAAOC,EAASC,EAAMH,GAAvB,IAA6BgG,EAA7B,uDAA0ChG,EAA1C,8CAAmD,WAAMkB,GAAN,SAAAC,EAAA,6DACxED,EAASN,IAAgB,IAD+C,SAGjDb,EAAmBE,EAAOC,EAASC,EAAMH,EAAMgG,GAAYxE,OAAM,SAAAC,GAEtF,OADAP,EAASN,IAAgB,IAClBM,EAASI,YAAW,OAAQ,CAAEC,OAAQE,QALyB,gBAStEP,EAAS2E,IAAkB,IAC3B3E,EAAS2E,IAAkB,KAG7B3E,EAASN,IAAgB,IAb+C,2CAAnD,uDAsDRqF,GAjJQ,WAAmC,IAAlCnE,EAAiC,uDAAzBvB,GAAcU,EAAW,uCACvD,OAAQA,EAAON,MACb,KAAK2E,GACH,OAAO,YAAC,eACHxD,GADL,IAEEY,MAAOzB,EAAOyB,QAElB,KAAK6C,GACH,OAAO,YAAC,eACHzD,GADL,IAEEgB,WAAY7B,EAAOoC,WAEvB,KAAKmC,GACH,OAAO,YAAC,eACH1D,GADL,IAEEU,WAAYvB,EAAOuB,aAEvB,KAAKlC,GACH,OAAO,YAAC,eACHwB,GADL,IAEErB,UAAWQ,EAAOR,YAEtB,KAAKiF,GACH,OAAO,YAAC,eACH5D,GADL,IAEEmB,YAAahC,EAAOgC,cAExB,KAAKwC,GACH,OAAO,YAAC,eACH3D,GADL,IAEEc,mBAAoB3B,EAAOuB,WAAP,uBACdV,EAAMc,oBADQ,CACY3B,EAAOjB,OADnB,aAEd8B,EAAMc,mBAAmBsD,QAAO,SAAAlG,GAAI,OAAIA,IAASiB,EAAOjB,WAElE,QACE,OAAO8B,IC9CPqE,G,kLAEFjB,KAAKC,MAAMiB,yB,+BAIX,OACE,cAAC,GAAD,CACE1D,MAAOwC,KAAKC,MAAMzC,MAClBF,WAAY0C,KAAKC,MAAM3C,WACvBc,WAAY4B,KAAKC,MAAM7B,WACvBV,mBAAoBsC,KAAKC,MAAMvC,yB,GAXDwC,IAAMJ,WA0BtCqB,GAAqB,CACzBD,qBDkEkC,yDAAM,WAAMlF,GAAN,SAAAC,EAAA,sEAClCpB,IAA4BuG,YAAW,SAAA1G,GAC3CsB,EAAS0E,IAAiB,IAC1B1E,EA7CK,CACLP,KAAM2E,GACN5C,MA2CkB9C,IAClBsB,EAAS0E,IAAiB,OAJY,2CAAN,uDCjElCtC,WDwGwB,SAACtD,GAAD,8CAAU,WAAMkB,GAAN,SAAAC,EAAA,6DAClCD,EAAS4E,IAAyB,EAAM9F,IADN,SAG5BD,EAAsBC,GAHM,OAKlCkB,EAAS4E,IAAyB,EAAO9F,IALP,2CAAV,wDCrGXuG,eACbxB,GACAM,aAhBsB,SAACvD,GACvB,MAAO,CACLU,WAAYF,EAAcR,GAC1BY,MAAOD,EAAaX,GACpBc,mBAAoBD,EAAsBb,MAYnBuE,IAFZE,CAGbJ,I,4DCvCWK,GAAQ,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,MAAOC,EAAgC,EAAhCA,KAAMC,EAA0B,EAA1BA,MAAUC,EAAgB,yCACvDC,EAAWH,EAAKI,SAAWJ,EAAKjF,MAEtC,OAAO,sBAAK8B,UAAWC,KAAE,iBAAlB,UACJmD,GAAS,uBAAOI,QAASH,EAAUnC,GAA1B,SAA+BkC,IACzC,6DAAWF,GAAWG,GAAtB,IAAiCrD,UAAS,uBAAkBC,KAAEQ,YAE5D6C,GACA,oBAAGtD,UAAU,qBAAb,cAAoCmD,EAAKjF,MAAzC,WXXOuF,GAAW,SAAAnD,GACtB,OAAOA,OAAQoD,EAAa,qBAOjBC,GAAiB,SAACrD,EAAOsD,GACpC,OAAOtD,IAAUsD,EAAUtH,SAAW,6BAA2BoH,GAGtDG,GAAkB,SAAAvD,GAC7B,OAAOA,IAAU,kCAAmBwD,KAAKxD,GAAlC,+DAAuGoD,GAGnGK,GAAe,SAAAzD,GAC1B,OAAOA,IAAU,8DAA8DwD,KAAKxD,GAA7E,qBAAwGoD,GAGpGM,GAAiB,SAAA1D,GAC5B,OAAOA,IAAU,kEAAoCwD,KAAKxD,GAAnD,gEACmCoD,GAG/BO,GAAc,SAAA3D,GACzB,OAAOA,IAAU,iCAAkBwD,KAAKxD,GAAjC,sBAA6DoD,GAGzDQ,GAAgB,SAAA5D,GAC3B,OAAO,IAAI6D,KAAK7D,GAAS,IAAI6D,KAAS,+BAA6BT,GAGxDU,GAAc,SAAA9D,GACzB,OAAOA,IAAU,WAAWwD,KAAKxD,GAA1B,mCAAmEoD,GAG/DW,GAAkB,SAAC/D,EAAOsD,GACrC,IAAMU,EAAmB,IAAIH,KAAK,KAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GACjDI,EAAW,IAAIJ,KAAKP,EAAUhH,MAEpC,GAAI2H,EAAU,CACZ,GAAIA,EAAWD,EACb,OAAwB,KAAjBhE,EAAMkE,QAAiB,0CAGhC,GAAID,GAAYD,EACd,OAAwB,KAAjBhE,EAAMkE,QAAiB,4C,oBYzC9BC,IZF0B9I,EYEI,EZFS,SAAA2E,GAC3C,OAAOA,EAAMkE,OAAS7I,EAAf,oBAAyCA,EAAzC,iBAA+D+H,IYGlEgB,GAAW,SAAC,GAAgE,IAA9DhI,EAA6D,EAA7DA,MAA6D,IAAtDiI,eAAsD,SAArCC,EAAqC,EAArCA,aAAc1G,EAAuB,EAAvBA,MAAOhB,EAAgB,EAAhBA,UACzD2H,EAAqBF,EAAU,CAAClB,IAAY,CAACA,GAAUI,GAAiBY,IACxEK,EAAkBH,EAAU,CAAClB,IAAY,CAACA,GAAUM,IAE1D,OACE,uBAAM/D,UAAWC,KAAE8E,KAAMC,SAAUJ,EAAnC,UACE,cAACK,GAAA,EAAD,CAAO7H,KAAK,QAAQ8H,KAAM,QAASC,YAAY,QAAQC,UAAWnC,GAAOoC,SAAUP,EAAiBQ,aAAa,OACjH,cAACL,GAAA,EAAD,CAAO7H,KAAK,WAAW8H,KAAM,WAAYC,YAAY,WAAWC,UAAWnC,GAAOoC,SAAUR,EAAoBS,aAAa,SAC1HX,GACD,cAACM,GAAA,EAAD,CAAO7H,KAAK,WAAW8H,KAAM,kBAAmBC,YAAY,kBAAkBC,UAAWnC,GAAOoC,SAAU,CAAC5B,GAAUE,IAAiB2B,aAAa,QAGnJpH,GACA,mBAAG8B,UAAU,qBAAb,SACG9B,IAGL,wBAAQd,KAAK,SAAS4C,UAAS,0BAAqBC,KAAE,eAAiBS,SAAUxD,EAAjF,SACGR,QAMI6I,GAAYC,aAAU,CACjCT,KAAM,SADiBS,CAEtBd,IAEUe,GAAmBD,aAAU,CACxCT,KAAM,gBADwBS,CAE7Bd,I,qBCOYgB,GAxCE,SAAC,GAAgD,IAA9CzI,EAA6C,EAA7CA,OAAQkB,EAAqC,EAArCA,MAAOE,EAA8B,EAA9BA,aAAcnB,EAAgB,EAAhBA,UAAgB,EACjCyI,oBAAS,GADwB,oBACxDhB,EADwD,KAC/CiB,EAD+C,KAEzDlJ,EAAQiI,EAAU,QAAU,eAC5BkB,EAAUlB,EAAU,eAAiB,QAc3C,OAAI1H,EACK,cAAC,IAAD,CAAUuD,GAAG,aAIpB,yBAASR,UAAU,UAAnB,SACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,QAAd,SACGtD,IAGDiI,EACE,cAACY,GAAD,CAAW7I,MAAOA,EAAOiI,QAASA,EAASK,SApBrC,SAAC,GAAyB,IAAvBjJ,EAAsB,EAAtBA,MAAOO,EAAe,EAAfA,SACxB6B,EAAMpC,EAAOO,IAmByDY,UAAWA,IACzE,cAACuI,GAAD,CAAkB/I,MAAOA,EAAOsI,SAjBlB,SAAC,GAAyB,IAAvBjJ,EAAsB,EAAtBA,MAAOO,EAAe,EAAfA,SAChC+B,EAAatC,EAAOO,IAgB+CY,UAAWA,IAE1E,wBAAQ0D,QA3BK,WACjBgF,GAAYjB,IA0BqB3E,UAAWC,KAAE,cAA1C,SACG4F,UCzBL/C,GAAqB,CACzB3E,QACAE,gBAGa2E,eACblB,aAbsB,SAACvD,GACvB,MAAO,CACLtB,OAAQ0B,EAAUJ,GAClBrB,UAAW2B,EAAiBN,MAULuE,IADZE,CAEb0C,I,oBCMaF,gBAAU,CACvBT,KAAM,QADOS,EApBE,SAAC,GAA8D,IAA5D9I,EAA2D,EAA3DA,MAAOkI,EAAoD,EAApDA,aAAc1G,EAAsC,EAAtCA,MAAOhB,EAA+B,EAA/BA,UAAW4I,EAAoB,EAApBA,cACzD,OACE,uBAAMd,SAAUJ,EAAc5E,UAAWC,KAAE8E,KAA3C,UACE,cAACE,GAAA,EAAD,CAAO7H,KAAK,OAAO8H,KAAM,QAAS9B,MAAM,SAASlC,GAAG,QAAQiE,YAAY,QAAQC,UAAWnC,GAAOoC,SAAU,CAAC5B,GAAUQ,IAAcqB,aAAa,OAClJ,cAACL,GAAA,EAAD,CAAO7H,KAAK,OAAO8H,KAAM,UAAW9B,MAAM,WAAWlC,GAAG,UAAUiE,YAAY,UAAUC,UAAWnC,GAAOoC,SAAU,CAAC5B,GAAUO,IAAiBsB,aAAa,OAC7J,cAACL,GAAA,EAAD,CAAO7H,KAAK,OAAO8H,KAAM,OAAQ9B,MAAM,QAAQlC,GAAG,OAAOiE,YAAY,OAAOC,UAAWnC,GAAOoC,SAAU,CAAC5B,GAAUS,IAAgBoB,aAAa,OAChJ,cAACL,GAAA,EAAD,CAAO7H,KAAK,OAAO8H,KAAM,OAAQ9B,MAAM,QAAQlC,GAAG,OAAOiE,YAAY,OAAOC,UAAWnC,GAAOoC,SAAU,CAAC5B,GAAUW,GAAaC,IAAkBiB,aAAa,KAAKS,SAAUD,IAE5K5H,GACA,mBAAG8B,UAAU,qBAAb,SACG9B,IAGL,wBAAQd,KAAK,SAAS4C,UAAS,0BAAqBC,KAAE,eAAiBS,SAAUxD,EAAjF,SACGR,UCuBMsJ,GAtCE,SAAC,GAAkF,IAAhFC,EAA+E,EAA/EA,WAAYC,EAAmE,EAAnEA,eAAgBpG,EAAmD,EAAnDA,SAAUb,EAAyC,EAAzCA,WAAY/B,EAA6B,EAA7BA,UASpE,OATiG,EAAlBwC,YAUtE,cAAC,IAAD,CAAUc,GAAG,aAIpB,yBAASR,UAAU,UAAnB,SACE,sBAAKA,UAAU,YAAf,UACE,cAAC,KAAD,CAASQ,GAAG,WAAWR,UAAU,YAAjC,6BAGA,oBAAIA,UAAU,QAAd,kBAIEf,EACE,cAAC,GAAD,IACA,mCAEIa,EACE,cAAC,GAAD,CAAUpD,MAAO,OAAQsI,SAvBhB,SAAC,GAAoC,IAAlCtI,EAAiC,EAAjCA,MAAOC,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,KAAMH,EAAW,EAAXA,KAChDyJ,EAAexJ,EAAOC,EAASC,EAAMH,EAAMqD,EAASrD,OAsBe0J,cAAerG,EAAU5C,UAAWA,EAAW4I,eAAe,IACnH,cAAC,GAAD,CAAUpJ,MAAO,MAAOsI,SA5BnB,SAAC,GAAoC,IAAlCtI,EAAiC,EAAjCA,MAAOC,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,KAAMH,EAAW,EAAXA,KAC5CwJ,EAAWvJ,EAAOC,EAASC,EAAMH,IA2B6BS,UAAWA,YCzBvEkJ,G,kLAEF,IAAI3J,EAAOkF,KAAKC,MAAMyE,MAAMC,OAAO7J,KACnCkF,KAAKC,MAAM2E,YAAY9J,K,0CAIvB+J,QAAQC,IAAI9E,KAAKC,MAAMyE,MAAMC,OAAO7J,MACpCkF,KAAK+E,sB,yCAGYC,GACbhF,KAAKC,MAAMyE,MAAMC,OAAO7J,OAASkK,EAAUN,MAAMC,OAAO7J,MAC1DkF,KAAK+E,sB,+BAKP,OACE,cAAC,GAAD,CACET,WAAYtE,KAAKC,MAAMqE,WACvBC,eAAgBvE,KAAKC,MAAMY,QAC3B1C,SAAU6B,KAAKC,MAAM9B,SACrBb,WAAY0C,KAAKC,MAAM3C,WACvB/B,UAAWyE,KAAKC,MAAM1E,UACtBwC,YAAaiC,KAAKC,MAAMlC,kB,GAzBGmC,IAAMJ,WAwCnCqB,GAAqB,CACzByD,YRkGyB,SAAC9J,GAAD,8CAAU,WAAMkB,GAAN,eAAAC,EAAA,yDACnCD,EAAS0E,IAAiB,IAErB5F,EAH8B,gBAIjCkB,EAASyE,GAAe,OAJS,sCAMV5F,EAAmBC,GANT,OAM3BJ,EAN2B,OAQjCsB,EAASyE,GAAe/F,EAAS+B,SARA,OAWnCwI,YAAW,WACTjJ,EAAS0E,IAAiB,MACzB,GAbgC,4CAAV,uDQjGzB4D,WR2EwB,SAACvJ,EAAOC,EAASC,EAAMH,GAAvB,8CAAgC,WAAMkB,GAAN,eAAAC,EAAA,6DACxDD,EAASN,IAAgB,IAD+B,SAEjCb,EAAmBC,GAFc,QAElDJ,EAFkD,QAI3CyB,QACXH,EAASI,YAAW,OAAQ,CAAEC,OAAQ,gCAGnC3B,EAASyB,QACZH,EAAS6E,GAAQ9F,EAAOC,EAASC,EAAMH,IAEzCkB,EAASN,IAAgB,IAX+B,2CAAhC,uDQ1ExBmF,YAGaQ,eACblB,aAhBsB,SAACvD,GACvB,MAAO,CACLuB,SAAUR,EAAcf,GACxBU,WAAYF,EAAcR,GAC1BrB,UAAWsC,EAAiBjB,GAC5BmB,YAAaD,EAAelB,MAWLuE,IACzB+D,IACArF,GAHawB,CAIboD,I,oBCnCaU,GArBA,SAAC,GAA+B,IAA7B7J,EAA4B,EAA5BA,OAAQlB,EAAoB,EAApBA,MAAOgL,EAAa,EAAbA,OAC/B,OACE,wBAAQ/G,UAAWC,KAAE+G,OAArB,SACE,qBAAKhH,UAAS,oBAAeC,KAAEC,SAA/B,SAEIjD,GACA,qCACE,mBAAG+C,UAAWC,KAAElE,MAAhB,SACGA,IAEH,wBAAQiE,UAAWC,KAAEgH,IAAKrG,QAASmG,EAAnC,4BCANjE,GAAqB,CACzBiE,OlBmFoB,kBAAM,SAAApJ,GAC1BA,EAASR,GAAY,EAAO,OAxC5BI,aAAa2J,WAAW,WkBzCXlE,eACblB,aAZsB,SAACvD,GACvB,MAAO,CACLtB,OAAQ0B,EAAUJ,GAClBxC,MAAO+C,EAASP,MASOuE,IADZE,CAEb8D,ICSaK,OArBf,WACE,OACE,iCACE,cAAC,GAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,OAAQ,kBAAM,cAAC,IAAD,CAAU9G,GAAI,gBAClD,cAAC,IAAD,CAAO4G,KAAK,QAAQE,OAAQ,kBAAM,cAAC,GAAD,OAClC,cAAC,IAAD,CAAOF,KAAK,eAAeE,OAAQ,kBAAM,cAAC,GAAD,OACzC,cAAC,IAAD,CAAOF,KAAK,WAAWE,OAAQ,kBAAM,cAAC,GAAD,OACrC,cAAC,IAAD,CAAOF,KAAK,IAAIE,OAAQ,WACtB,OACE,qBAAKtH,UAAU,yCAAf,0CCVNuH,G,kLAEF5F,KAAKC,MAAMxG,kB,+BAIX,OACEuG,KAAKC,MAAMnD,YACT,cAAC,GAAD,IACA,cAAC,GAAD,Q,GATsBoD,IAAMJ,WAoB9BqB,GAAqB,CACzB1H,cnBH2B,yDAAM,WAAMuC,GAAN,SAAAC,EAAA,sEAC3BD,GDkBwB,SAAAA,GAC9B,IAAM5B,EAAQwB,aAAaiK,QAAQ,QAE/BzL,GACF4B,EAASR,GAAY,EAAMpB,OCvBI,OAGjC4B,EARO,CACLP,KAAMoB,IAIyB,2CAAN,wDmBMdwE,eACblB,aAXsB,SAACvD,GACvB,MAAO,CACLE,YAAakB,EAAepB,MASLuE,IADZE,CAEbuE,ICtBaE,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvL,MAAK,YAAkD,IAA/CwL,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,oBCARO,GAAWC,YAAgB,CAC/BtI,QAASlB,EACTE,KAAMN,EACNU,QAAS0D,GACTqC,KAAMoD,OAGFC,GAAmBC,OAAOC,sCAAwCtF,IAClEuF,GAAQC,YAAYP,GAAUG,GAAiBK,YAAgBC,QAErEL,OAAOE,MAAQA,GAEAA,UCVfI,IAASrB,OACP,cAAC,KAAD,UACE,cAAC,IAAD,CAAUiB,MAAOA,GAAjB,SACE,cAAC,GAAD,QAGJK,SAASC,eAAe,SAM1BpB,M,mBCpBAxM,EAAOC,QAAU,CAAC,OAAS,uBAAuB,QAAU,wBAAwB,MAAQ,sBAAsB,IAAM,sB,mBCAxHD,EAAOC,QAAU,CAAC,UAAU,6BAA6B,MAAQ,6B,mBCAjED,EAAOC,QAAU,CAAC,gBAAgB,qCAAqC,QAAU,iC,mBCAjFD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,aAAa,+B,mBCA7DD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,aAAa,gC","file":"static/js/main.377489f8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"lds-ring\":\"loader_lds-ring__1FZhz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggle-btn\":\"authPage_toggle-btn__l4UTG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"booksItem_wrapper__3PGnD\",\"title\":\"booksItem_title__1fPmx\",\"list\":\"booksItem_list__37gi0\",\"item\":\"booksItem_item__Gy8Gv\",\"field\":\"booksItem_field__ycqMz\",\"value\":\"booksItem_value__mTYYE\",\"controls\":\"booksItem_controls__3Sg39\",\"control\":\"booksItem_control__2Lm2I\"};","import firebase from 'firebase';\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyCJryPWbbHUEDUYCpFmIMk4biYmGW9cGwI\",\n  authDomain: \"test-task-very-interesting.firebaseapp.com\",\n  projectId: \"test-task-very-interesting\",\n  storageBucket: \"test-task-very-interesting.appspot.com\",\n  messagingSenderId: \"669971670276\",\n  appId: \"1:669971670276:web:ae501f1e510489b9679c51\"\n});\n\nconst db = firebase.firestore();\n\nexport const authAPI = {\n  getUser(email) {\n    return db.collection(\"users\").doc(email.toLowerCase()).get().then(response =>\n      response\n    )\n  },\n  setUser(email, password) {\n    return db.collection(\"users\").doc(email.toLowerCase()).set({ email, password }).then(() =>\n      true\n    )\n  }\n}\n\nexport const libraryAPI = {\n  getBook(ISBN) {\n    return db.collection(\"books\").doc(ISBN).get().then(response =>\n      response\n    )\n  },\n  setBook(title, authors, date, ISBN) {\n    return db.collection(\"books\").doc(ISBN).set({ title, authors, date, ISBN }).then(() =>\n      true\n    )\n  },\n  subscribeBooks() {\n    return db.collection(\"books\")\n  },\n  deleteBook(ISBN) {\n    return db.collection(\"books\").doc(ISBN).delete().then(() =>\n      true\n    )\n  }\n}","export const required = value => {\n  return value ? undefined :  'Field is required';\n}\n\nexport const minLengthCreator = minLenght => value => {\n  return value.length < minLenght ?  `Minlength ${minLenght} symbols` : undefined;\n}\n\nexport const passwordsMatch = (value, allValues) => {\n  return value !== allValues.password ? 'Passwords don\\'t match' : undefined;\n}\n\nexport const passwordPattern = value => {\n  return value && !/^[а-яёa-z0-9]+$/i.test(value) ? `Invalid password should contain only letters and digits` : undefined;\n}\n\nexport const emailPattern = value => {\n  return value && !/^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/.test(value) ? `Invalid email` : undefined;\n}\n\nexport const authorsPattern = value => {\n  return value && !/^[а-яёa-z.,;-]+[а-яёa-z.,;-\\s]+$/i.test(value) ? `Invalid string\n  should contain only letters and \".,-;\"` : undefined;\n}\n\nexport const bookPattern = value => {\n  return value && !/^[а-яёa-z0-9]+/i.test(value) ? `Invalid titile` : undefined;\n}\n\nexport const dateNotFuture = value => {\n  return new Date(value) > new Date() ? 'Date can\\'t be in future' : undefined; \n}\n\nexport const onlyNumbers = value => {\n  return value && !/^[0-9]+$/.test(value) ? `Should contain only numbers` : undefined;\n}\n\nexport const ISBNDateControl = (value, allValues) => {\n  const formatChangeDate = new Date(2007, 0, 1, 0, 0, 0, 0);\n  const formDate = new Date(allValues.date);\n\n  if (formDate) {\n    if (formDate > formatChangeDate) {\n      return value.length !== 13 && 'from this date should contain 13 digits';\n    }\n\n    if (formDate <= formatChangeDate) {\n      return value.length !== 10 && 'from this date should contain 10 digits';\n    }\n  }\n}","import { authAPI } from '../firebase/firebase';\nimport { stopSubmit } from 'redux-form';\n\nconst SET_USER_DATA = 'SET_USER0DATA';\nconst TOGGLE_IS_SENDING = 'TOGGLE_IS_SENDING';\n\nconst initialState = {\n  isAuth: false,\n  isSending: false,\n  email: null\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_USER_DATA:\n      return ({\n        ...state,\n        isAuth: action.isAuth,\n        email: action.email\n      })\n    case TOGGLE_IS_SENDING:\n      return ({\n        ...state,\n        isSending: action.isSending\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setUserData = (isAuth, email) => {\n  return {\n    type: SET_USER_DATA,\n    isAuth,\n    email\n  }\n}\n\nexport const toggleIsSending = (isSending) => {\n  return {\n    type: TOGGLE_IS_SENDING,\n    isSending\n  }\n}\n\nexport const initialApp = () => dispatch => {\n  const email = localStorage.getItem('user');\n\n  if (email) {\n    dispatch(setUserData(true, email));\n  }\n}\n\nconst setLocalStorage = (email) => {\n  localStorage.setItem('user', email);\n}\n\nconst removeLocalStorage = () => {\n  localStorage.removeItem('user');\n}\n\nconst authFuncCreator = action => (email, password) => async dispatch => {\n  dispatch(toggleIsSending(true));\n  const response = await authAPI.getUser(email, password);\n\n  action(email, password, response, dispatch);\n\n  dispatch(toggleIsSending(false));\n}\n\nconst loginFunc = (email, password, response, dispatch) => {\n  if (!response.exists || response.data().password !== password) {\n    dispatch(stopSubmit('login', { _error: 'Incorrect email or password' }));\n  } else {\n    dispatch(setUserData(true, email));\n    setLocalStorage(email);\n  }\n}\n\nconst registrationFunc = async (email, password, response, dispatch) => {\n  if (response.exists) {\n    dispatch(stopSubmit('registration', { _error: 'this email is already taken' }));\n  }\n\n  if (!response.exists) {\n    await authAPI.setUser(email, password).catch(error => {\n      return dispatch(stopSubmit('registration', { _error: error }));\n    });\n\n    dispatch(setUserData(true, email));\n    setLocalStorage(email);\n  }\n}\n\nexport const login = authFuncCreator(loginFunc);\nexport const registration = authFuncCreator(registrationFunc);\n\nexport const logout = () => dispatch => {\n  dispatch(setUserData(false, null));\n  removeLocalStorage();\n}\n\nexport default authReducer;","import { initialApp } from './auth-reducer';\n\nconst INITIALIZED_SUCCESS = 'INITIALIZED-SUCCESS';\n\nconst initialState = {\n  initialized: false,\n};\n\nconst appReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case INITIALIZED_SUCCESS:\n      return ({\n        ...state,\n        initialized: true\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setInitialazedSuccess = () => {\n  return {\n    type: INITIALIZED_SUCCESS,\n  }\n}\n\nexport const initializeApp = () => async dispatch => {\n  await dispatch(initialApp())\n\n  dispatch(setInitialazedSuccess());\n}\n\nexport default appReducer;","export const getIsAuth = (state) => {\n  return state.auth.isAuth\n}\n\nexport const gerIsSendingAuth = (state) => {\n  return state.auth.isSending\n}\n\nexport const getEmail = (state) => {\n  return state.auth.email\n}\n\nexport const getIsFetching = (state) => {\n  return state.library.isFetching\n}\n\nexport const getBooksList = (state) => {\n  return state.library.books\n}\n\nexport const getDeletingInProgress = (state) => {\n  return state.library.deletingInProgress\n}\n\nexport const getActiveBook = (state) => {\n  return state.library.activeBook\n}\n\nexport const getIsSendingBook = (state) => {\n  return state.library.isSending\n}\n\nexport const getSuccessSend = (state) => {\n  return state.library.successSend\n}\n\nexport const getInitialized = (state) => {\n  return state.initial.initialized\n}\n","import React from 'react';\nimport s from './booksItem.module.css';\nimport { NavLink } from \"react-router-dom\";\n\nconst BooksItem = ({ bookInfo, deleteBook, deletingInProgress }) => {\n  return (\n    <article className={s.wrapper}>\n      <h2 className={s.title}>\n        {bookInfo.title}\n      </h2>\n      <ul className={s.list}>\n        <li className={s.item}>\n          <span className={s.field}>\n            Date of issue:\n          </span>\n          <span className={s.value}>\n            {bookInfo.date}\n          </span>\n        </li>\n        <li className={s.item}>\n          <span className={s.field}>\n            Authors:\n          </span>\n          <span className={s.value}>\n            {bookInfo.authors}\n          </span>\n        </li>\n        <li className={s.item}>\n          <span className={s.field}>\n            ISBN:\n          </span>\n          <span className={s.value}>\n            {bookInfo.ISBN}\n          </span>\n        </li>\n      </ul>\n      <div className={s.controls}>\n        <NavLink to={`/book/${bookInfo.ISBN}`} className={`btn btn-warning ${s.control}`}>\n          Edit\n        </NavLink>\n        <button\n          className={`btn btn-danger ${s.control}`}\n          disabled={deletingInProgress.some(ISBN => ISBN === bookInfo.ISBN)}\n          onClick={() => deleteBook(bookInfo.ISBN)}\n        >\n          Delete\n        </button>\n      </div>\n    </article>\n  )\n}\n\nexport default BooksItem;","import React from 'react';\nimport BooksItem from '../BookItem/BookItem';\n\nconst BooksList = ({ books, deleteBook, deletingInProgress }) => {\n  const booksItems = [];\n\n  books.forEach(book => {\n    booksItems.push(\n      <BooksItem bookInfo={book.data()} key={book.id} deleteBook={deleteBook} deletingInProgress={deletingInProgress}/>\n    )\n  })\n\n  return (\n    <ul>\n      {booksItems}\n    </ul>\n  )\n}\n\nexport default BooksList;","import React from 'react';\nimport s from './loader.module.css';\n\nexport const Loader = () => {\n  return (\n    <div className={s['lds-ring']}>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  )\n}","import React from 'react';\nimport s from './libraryPage.module.css';\nimport { NavLink } from \"react-router-dom\";\nimport BooksList from '../BooksList/BooksList';\nimport { Loader } from '../common/Loader/Loader';\n\nconst LibraryPage = ({ books, isFetching, deleteBook, deletingInProgress }) => {\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <h1 className=\"title\">\n          Library\n        </h1>\n        <NavLink to=\"/book\" className={`btn ${s['add-btn']}`}>\n          Add new book\n        </NavLink>\n        {\n          isFetching ?\n            <Loader /> :\n            <>\n              {\n                books.size > 0 ?\n                  <BooksList books={books} deleteBook={deleteBook} deletingInProgress={deletingInProgress} /> :\n                  <p className={`alert alert-warning ${s.alert}`}>\n                    There are no books yet\n                  </p>\n              }\n            </>\n        }\n      </div>\n    </section >\n  )\n}\n\nexport default LibraryPage;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getIsAuth } from '../redux/selectors';\n\nconst mapStateToPropsRedirect = (state) => {\n  return {\n    isAuth: getIsAuth(state)\n  }\n}\n\nexport const withAuthRedirect = (Component) => {\n  \n  class RedirectComponent extends React.Component { \n    render() {\n      if (!this.props.isAuth) {\n        return <Redirect to={'/auth'} />\n      }\n      \n      return <Component {...this.props} /> \n    }\n  }\n\n  return connect(mapStateToPropsRedirect)(RedirectComponent);\n}\n","import { libraryAPI } from '../firebase/firebase';\nimport { stopSubmit } from 'redux-form';\n\nconst SET_BOOKS = 'SET_BOOKS';\nconst SET_ACTIVE_BOOK = 'ET_ACTIVE_BOOK';\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\nconst TOGGLE_IS_DELETING_PROGRESS = 'TOGGLE_IS_DELETING_PROGRESS';\nconst TOGGLE_IS_SENDING = 'TOGGLE_IS_SENDING';\nconst TOGGLE_SUCCESS_SEND = 'TOGGLE_SUCCESS_SEND';\n\nconst initialState = {\n  books: [],\n  isFetching: true,\n  deletingInProgress: [],\n  activeBook: {},\n  isSending: false,\n  successSend: false\n};\n\nconst libraryReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_BOOKS:\n      return ({\n        ...state,\n        books: action.books,\n      })\n    case SET_ACTIVE_BOOK:\n      return ({\n        ...state,\n        activeBook: action.bookInfo,\n      })\n    case TOGGLE_IS_FETCHING:\n      return ({\n        ...state,\n        isFetching: action.isFetching\n      })\n    case TOGGLE_IS_SENDING:\n      return ({\n        ...state,\n        isSending: action.isSending\n      })\n    case TOGGLE_SUCCESS_SEND:\n      return ({\n        ...state,\n        successSend: action.successSend\n      })\n    case TOGGLE_IS_DELETING_PROGRESS:\n      return ({\n        ...state,\n        deletingInProgress: action.isFetching ?\n          [...state.deletingInProgress, action.ISBN] :\n          [...state.deletingInProgress.filter(ISBN => ISBN !== action.ISBN)]\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setBooks = (books) => {\n  return {\n    type: SET_BOOKS,\n    books\n  }\n}\n\nexport const setActiveBooks = (bookInfo) => {\n  return {\n    type: SET_ACTIVE_BOOK,\n    bookInfo\n  }\n}\n\nexport const toggleIsFetching = (isFetching) => {\n  return {\n    type: TOGGLE_IS_FETCHING,\n    isFetching\n  }\n}\n\nexport const toggleIsSending = (isSending) => {\n  return {\n    type: TOGGLE_IS_SENDING,\n    isSending\n  }\n}\n\nexport const toggleSuccessSend = (successSend) => {\n  return {\n    type: TOGGLE_SUCCESS_SEND,\n    successSend\n  }\n}\n\nexport const toggleIsDeletingProgress = (isFetching, ISBN) => {\n  return {\n    type: TOGGLE_IS_DELETING_PROGRESS,\n    isFetching,\n    ISBN\n  }\n}\n\nexport const toggleSubscribeBooks = () => async dispatch => {\n  await libraryAPI.subscribeBooks().onSnapshot(response => {\n    dispatch(toggleIsFetching(true));\n    dispatch(setBooks(response));\n    dispatch(toggleIsFetching(false));\n  })\n\n}\n\nexport const setBook = (title, authors, date, ISBN, targetISMN = ISBN) => async dispatch => {\n  dispatch(toggleIsSending(true));\n\n  const response = await libraryAPI.setBook(title, authors, date, ISBN, targetISMN).catch(error => {\n    dispatch(toggleIsSending(false));\n    return dispatch(stopSubmit('book', { _error: error }));\n  });\n\n  if (response) {\n    dispatch(toggleSuccessSend(true));\n    dispatch(toggleSuccessSend(false));\n  };\n\n  dispatch(toggleIsSending(false));\n}\n\nexport const addNewBook = (title, authors, date, ISBN) => async dispatch => {\n  dispatch(toggleIsSending(true));\n  const response = await libraryAPI.getBook(ISBN);\n\n  if (response.exists) {\n    dispatch(stopSubmit('book', { _error: 'this ISBN is already taken' }));\n  }\n\n  if (!response.exists) {\n    dispatch(setBook(title, authors, date, ISBN));\n  }\n  dispatch(toggleIsSending(false));\n}\n\nexport const deleteBook = (ISBN) => async dispatch => {\n  dispatch(toggleIsDeletingProgress(true, ISBN));\n\n  await libraryAPI.deleteBook(ISBN);\n\n  dispatch(toggleIsDeletingProgress(false, ISBN));\n}\n\nexport const getBookInfo = (ISBN) => async dispatch => {\n  dispatch(toggleIsFetching(true));\n\n  if (!ISBN) {\n    dispatch(setActiveBooks(null));\n  } else {\n    const response = await libraryAPI.getBook(ISBN);\n\n    dispatch(setActiveBooks(response.data()));\n  }\n\n  setTimeout(() => {\n    dispatch(toggleIsFetching(false));\n  }, 0);\n}\n\nexport default libraryReducer;","import React from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport LibraryPage from './LibraryPage';\nimport { getIsFetching, getBooksList, getDeletingInProgress } from '../../redux/selectors';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { toggleSubscribeBooks, deleteBook } from '../../redux/library-reducer';\n\nclass LibraryPageAPIComponent extends React.Component {\n  componentDidMount() {\n    this.props.toggleSubscribeBooks();\n  }\n\n  render() {\n    return (\n      <LibraryPage\n        books={this.props.books}\n        isFetching={this.props.isFetching}\n        deleteBook={this.props.deleteBook}\n        deletingInProgress={this.props.deletingInProgress}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isFetching: getIsFetching(state),\n    books: getBooksList(state),\n    deletingInProgress: getDeletingInProgress(state)\n  }\n}\n\n\nconst mapDispatchToProps = {\n  toggleSubscribeBooks,\n  deleteBook,\n}\n\nexport default compose(\n  withAuthRedirect,\n  connect(mapStateToProps, mapDispatchToProps)\n)(LibraryPageAPIComponent);","import React from 'react';\nimport s from './formsControls.module.css';\n\nexport const Input = ({ input, meta, label, ...restProps }) => {\n  const hasError = meta.touched && meta.error;\n\n  return <div className={s['field-wrapper']}>\n    {label && <label htmlFor={restProps.id}>{label}</label>}\n    <input {...input} {...restProps} className={`form-control ${s.control}`} ></input>\n    {\n      hasError && \n      <p className=\"alert alert-danger\"> {meta.error} </p>\n    }\n  </div>\n}","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Input } from '../common/FormContols/FormControls';\nimport { required, minLengthCreator, passwordsMatch, passwordPattern, emailPattern } from '../../utils/validators';\nimport s from './authForm.module.css';\n\nconst minLength9 = minLengthCreator(9);\n\nconst AuthForm = ({ title, isLogin = false, handleSubmit, error, isSending }) => {\n  const passwordValidators = isLogin ? [required] : [required, passwordPattern, minLength9];\n  const loginValidators = isLogin ? [required] : [required, emailPattern];\n\n  return (\n    <form className={s.form} onSubmit={handleSubmit}>\n      <Field type=\"email\" name={'email'} placeholder=\"Email\" component={Input} validate={loginValidators} autoComplete=\"on\" />\n      <Field type=\"password\" name={'password'} placeholder=\"Password\" component={Input} validate={passwordValidators} autoComplete=\"off\" />\n      { !isLogin &&\n        <Field type=\"password\" name={'Repeat-password'} placeholder=\"Repeat password\" component={Input} validate={[required, passwordsMatch]} autoComplete=\"off\" />\n      }\n      {\n        error &&\n        <p className=\"alert alert-danger\">\n          {error}\n        </p>\n      }\n      <button type=\"submit\" className={`btn btn-primary ${s['submit-btn']}`} disabled={isSending}>\n        {title}\n      </button>\n    </form>\n  )\n}\n\nexport const LoginForm = reduxForm({\n  form: 'login',\n})(AuthForm);\n\nexport const RegistrationForm = reduxForm({\n  form: 'registration'\n})(AuthForm);","import React, { useState } from 'react';\nimport { LoginForm, RegistrationForm } from '../AuthForm/AuthForm';\nimport { Redirect } from 'react-router-dom';\nimport s from './authPage.module.css';\n\nconst AuthPage = ({ isAuth, login, registration, isSending }) => {\n  const [isLogin, setIsLogin] = useState(true);\n  const title = isLogin ? 'Login' : 'Registration';\n  const btnText = isLogin ? 'Registration' : 'Login';\n\n  const toggleForm = () => {\n    setIsLogin(!isLogin);\n  }\n\n  const onLogin = ({ email, password }) => {\n    login(email, password);\n  }\n\n  const onRegistrationt = ({ email, password }) => {\n    registration(email, password);\n  }\n\n  if (isAuth) {\n    return <Redirect to='/library' />\n  }\n\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <h2 className=\"title\">\n          {title}\n        </h2>\n        {\n          isLogin ?\n            <LoginForm title={title} isLogin={isLogin} onSubmit={onLogin} isSending={isSending} /> :\n            <RegistrationForm title={title} onSubmit={onRegistrationt} isSending={isSending} />\n        }\n        <button onClick={toggleForm} className={s['toggle-btn']}>\n          {btnText}\n        </button>\n      </div>\n    </section>\n  )\n}\n\nexport default AuthPage;\n","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { login, registration } from '../../redux/auth-reducer';\nimport { getIsAuth, gerIsSendingAuth } from '../../redux/selectors';\nimport AuthPage from './AuthPage';\n\nconst mapStateToProps = (state) => {\n  return {\n    isAuth: getIsAuth(state),\n    isSending: gerIsSendingAuth(state)\n  }\n}\n\nconst mapDispatchToProps = {\n  login,\n  registration\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(AuthPage);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Input } from '../common/FormContols/FormControls';\nimport { required, authorsPattern, bookPattern, dateNotFuture, onlyNumbers, ISBNDateControl } from '../../utils/validators';\nimport s from './bookForm.module.css'\n\nconst BookForm = ({ title, handleSubmit, error, isSending, onlyRedaction }) => {\n  return (\n    <form onSubmit={handleSubmit} className={s.form}>\n      <Field type=\"text\" name={'title'} label=\"Title:\" id=\"title\" placeholder=\"Title\" component={Input} validate={[required, bookPattern]} autoComplete=\"on\" />\n      <Field type=\"text\" name={'authors'} label=\"Authors:\" id=\"Authors\" placeholder=\"Authors\" component={Input} validate={[required, authorsPattern]} autoComplete=\"on\" />\n      <Field type=\"date\" name={'date'} label=\"Date:\" id=\"Date\" placeholder=\"Date\" component={Input} validate={[required, dateNotFuture]} autoComplete=\"on\" />\n      <Field type=\"text\" name={'ISBN'} label=\"ISBN:\" id=\"ISBN\" placeholder=\"ISBN\" component={Input} validate={[required, onlyNumbers, ISBNDateControl]} autoComplete=\"on\" readOnly={onlyRedaction} />\n      {\n        error &&\n        <p className=\"alert alert-danger\">\n          {error}\n        </p>\n      }\n      <button type=\"submit\" className={`btn btn-primary ${s['submit-btn']}`} disabled={isSending}>\n        {title}\n      </button>\n    </form>\n  )\n}\n\nexport default reduxForm({\n  form: 'book',\n})(BookForm);\n","import React from 'react';\nimport BookForm from '../BookForm/BookForm';\nimport { Redirect, NavLink } from 'react-router-dom';\nimport { Loader } from '../common/Loader/Loader';\n\nconst BookPage = ({ addNewBook, updateBookInfo, bookInfo, isFetching, isSending, successSend }) => {\n  const onAddNewBook = ({ title, authors, date, ISBN }) => {\n    addNewBook(title, authors, date, ISBN);\n  }\n\n  const onUpdateBookInfo = ({ title, authors, date, ISBN }) => {\n    updateBookInfo(title, authors, date, ISBN, bookInfo.ISBN);\n  }\n\n  if (successSend) {\n    return <Redirect to='/library' />\n  }\n\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <NavLink to=\"/library\" className=\"link-back\">\n          Back to library\n        </NavLink>\n        <h2 className=\"title\">\n          Book\n        </h2>\n        {\n          isFetching ?\n            <Loader/> :\n            <>\n              {\n                bookInfo ?\n                  <BookForm title={'Save'} onSubmit={onUpdateBookInfo} initialValues={bookInfo} isSending={isSending} onlyRedaction={true} /> :\n                  <BookForm title={'Add'} onSubmit={onAddNewBook} isSending={isSending} />\n              }\n            </>\n        }\n      </div>\n    </section>\n  )\n}\n\nexport default BookPage;\n","import React from 'react';\nimport BookPage from \"./BookPage\";\nimport { withRouter } from 'react-router-dom';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { addNewBook, getBookInfo, setBook } from '../../redux/library-reducer';\nimport { getActiveBook, getIsFetching, getSuccessSend, getIsSendingBook } from '../../redux/selectors';\n\nclass BookPageAPIComponent extends React.Component {\n  getActualBookData() {\n    let ISBN = this.props.match.params.ISBN;\n    this.props.getBookInfo(ISBN);\n  }\n\n  componentDidMount() {\n    console.log(this.props.match.params.ISBN)\n    this.getActualBookData()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.params.ISBN !== prevProps.match.params.ISBN) {\n      this.getActualBookData();\n    }\n  }\n\n  render() {\n    return (\n      <BookPage\n        addNewBook={this.props.addNewBook}\n        updateBookInfo={this.props.setBook}\n        bookInfo={this.props.bookInfo}\n        isFetching={this.props.isFetching}\n        isSending={this.props.isSending}\n        successSend={this.props.successSend}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    bookInfo: getActiveBook(state),\n    isFetching: getIsFetching(state),\n    isSending: getIsSendingBook(state),\n    successSend: getSuccessSend(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  getBookInfo,\n  addNewBook,\n  setBook\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withRouter,\n  withAuthRedirect\n)(BookPageAPIComponent);","import React from 'react';\nimport s from './header.module.css';\n\nconst Header = ({ isAuth, email, logout }) => {\n  return (\n    <header className={s.header}>\n      <div className={`container ${s.wrapper}`}>\n        {\n          isAuth &&\n          <>\n            <p className={s.email}>\n              {email}\n            </p>\n            <button className={s.btn} onClick={logout}>\n              logout\n            </button>\n          </>\n        }\n\n      </div>\n    </header>\n  )\n}\n\nexport default Header;","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { logout } from '../../redux/auth-reducer';\nimport { getIsAuth, getEmail } from '../../redux/selectors';\nimport Header from './Header';\n\nconst mapStateToProps = (state) => {\n  return {\n    isAuth: getIsAuth(state),\n    email: getEmail(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  logout,\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(Header);","import React from 'react';\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport LibraryPage from './components/LibraryPage/LibraryPageContainer';\nimport AuthPage from './components/AuthPage/AuthPageContainer';\nimport BookPage from './components/BookPage/BookPageContainer';\nimport Header from './components/Headerr/HeaderContainer';\n\nfunction App() {\n  return (\n    <main>\n      <Header />\n      <Switch>\n        <Route path=\"/\" exact render={() => <Redirect to={\"/library\"} />} />\n        <Route path=\"/auth\" render={() => <AuthPage />} />\n        <Route path=\"/book/:ISBN?\" render={() => <BookPage />} />\n        <Route path=\"/library\" render={() => <LibraryPage />} />\n        <Route path=\"*\" render={() => {\n          return (\n            <div className=\"container alert alert-danger not-found\">\n              404 PAGE NOT FOUND\n            </div>\n          )\n        }} />\n      </Switch>\n    </main>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { initializeApp } from './redux/app-reducer';\nimport { getInitialized } from './redux/selectors';\nimport App from './App';\nimport { Loader } from './components/common/Loader/Loader';\n\nclass AppApiComponent extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n\n  render() {\n    return (\n      this.props.initialized ?\n        <App /> :\n        <Loader />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    initialized: getInitialized(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  initializeApp\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(AppApiComponent);","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport { reducer as formReducer } from 'redux-form';\nimport thunkMiddleware from  'redux-thunk';\nimport authReducer from './auth-reducer';\nimport appReducer from './app-reducer';\nimport libraryReducer from './library-reducer';\n\nconst reducers = combineReducers({\n  initial: appReducer,\n  auth: authReducer,\n  library: libraryReducer,\n  form: formReducer\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\n\nwindow.store = store;\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './AppContainer';\nimport reportWebVitals from './reportWebVitals';\nimport store from './redux/redux-store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3mu8Z\",\"wrapper\":\"header_wrapper__1V7lE\",\"email\":\"header_email__3OWYD\",\"btn\":\"header_btn__1Oulx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"add-btn\":\"libraryPage_add-btn__1_s7r\",\"alert\":\"libraryPage_alert__3GGMk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field-wrapper\":\"formsControls_field-wrapper__3PWku\",\"control\":\"formsControls_control__2sK7d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"authForm_form__3KzO3\",\"submit-btn\":\"authForm_submit-btn__3XJEw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"bookForm_form__3jmEc\",\"submit-btn\":\"bookForm_submit-btn__2P7_4\"};"],"sourceRoot":""}