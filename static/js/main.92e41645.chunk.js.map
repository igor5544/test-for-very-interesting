{"version":3,"sources":["components/common/Loader/loader.module.css","components/AuthPage/authPage.module.css","components/BookItem/booksItem.module.css","firebase/firebase.js","utils/validators.js","redux/auth-reducer.js","redux/app-reducer.js","redux/selectors.js","components/BookItem/BookItem.js","components/BooksList/BooksList.js","components/common/Loader/Loader.js","components/LibraryPage/LibraryPage.js","hoc/withAuthRedirect.js","redux/library-reducer.js","components/LibraryPage/LibraryPageContainer.js","components/common/FormContols/FormControls.js","components/AuthForm/AuthForm.js","components/AuthPage/AuthPage.js","components/AuthPage/AuthPageContainer.js","components/BookForm/BookForm.js","components/BookPage/BookPage.js","components/BookPage/BookPageContainer.js","components/Headerr/Header.js","components/Headerr/HeaderContainer.js","App.js","AppContainer.js","reportWebVitals.js","redux/redux-store.js","index.js","components/Headerr/header.module.css","components/LibraryPage/libraryPage.module.css","components/common/FormContols/formsControls.module.css","components/AuthForm/authForm.module.css","components/BookForm/bookForm.module.css"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","minLenght","db","firestore","authAPI","email","collection","doc","toLowerCase","get","then","response","password","set","libraryAPI","ISBN","where","title","authors","date","id","delete","SET_USER_DATA","TOGGLE_IS_SENDING","initialState","isAuth","isSending","setUserData","type","toggleIsSending","setLocalStorage","localStorage","setItem","authFuncCreator","action","dispatch","a","registrationFunc","exists","stopSubmit","_error","catch","error","login","data","registration","authReducer","state","INITIALIZED_SUCCESS","initialized","appReducer","getIsAuth","auth","gerIsSendingAuth","getEmail","getIsFetching","library","isFetching","getBooksList","books","getDeletingInProgress","deletingInProgress","getActiveBook","activeBook","getActiveBookId","activeBookId","getIsSendingBook","getSuccessSend","successSend","getInitialized","initial","BooksItem","bookInfo","deleteBook","bookId","className","s","wrapper","list","item","field","value","controls","to","control","disabled","some","onClick","BooksList","booksItems","forEach","book","push","Loader","LibraryPage","size","alert","mapStateToPropsRedirect","withAuthRedirect","Component","RedirectComponent","this","props","React","connect","SET_BOOKS","SET_ACTIVE_BOOK","SET_ACTIVE_BOOK_ID","TOGGLE_IS_FETCHING","TOGGLE_IS_DELETING_PROGRESS","TOGGLE_SUCCESS_SEND","setActiveBook","toggleIsFetching","toggleSuccessSend","toggleIsDeletingProgress","setBook","libraryReducer","filter","LibraryPageAPIComponent","toggleSubscribeBooks","mapDispatchToProps","onSnapshot","compose","Input","input","meta","label","restProps","hasError","touched","htmlFor","required","undefined","passwordsMatch","allValues","passwordPattern","test","emailPattern","authorsPattern","bookPattern","dateNotFuture","Date","onlyNumbers","ISBNDateControl","formatChangeDate","formDate","length","minLength9","AuthForm","isLogin","handleSubmit","passwordValidators","loginValidators","form","onSubmit","Field","name","placeholder","component","validate","autoComplete","LoginForm","reduxForm","RegistrationForm","AuthPage","useState","setIsLogin","btnText","BookPage","addNewBook","updateBookInfo","initialValues","BookPageAPIComponent","match","params","getBookInfo","getActualBookData","prevProps","setTimeout","withRouter","Header","logout","header","btn","removeItem","App","path","exact","render","AppApiComponent","getItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducers","combineReducers","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.92e41645.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"lds-ring\":\"loader_lds-ring__1FZhz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggle-btn\":\"authPage_toggle-btn__l4UTG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"booksItem_wrapper__3PGnD\",\"title\":\"booksItem_title__1fPmx\",\"list\":\"booksItem_list__37gi0\",\"item\":\"booksItem_item__Gy8Gv\",\"field\":\"booksItem_field__ycqMz\",\"value\":\"booksItem_value__mTYYE\",\"controls\":\"booksItem_controls__3Sg39\",\"control\":\"booksItem_control__2Lm2I\"};","import firebase from 'firebase';\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyCJryPWbbHUEDUYCpFmIMk4biYmGW9cGwI\",\n  authDomain: \"test-task-very-interesting.firebaseapp.com\",\n  projectId: \"test-task-very-interesting\",\n  storageBucket: \"test-task-very-interesting.appspot.com\",\n  messagingSenderId: \"669971670276\",\n  appId: \"1:669971670276:web:ae501f1e510489b9679c51\"\n});\n\nconst db = firebase.firestore();\n\nexport const authAPI = {\n  getUser(email) {\n    return db.collection(\"users\").doc(email.toLowerCase()).get().then(response =>\n      response\n    )\n  },\n  setUser(email, password) {\n    return db.collection(\"users\").doc(email.toLowerCase()).set({ email, password }).then(() =>\n      true\n    )\n  }\n}\n\nexport const libraryAPI = {\n  getBook(ISBN) {\n    return db.collection(\"books\").where(\"ISBN\", \"==\", ISBN).get().then(response =>\n      response\n    )\n  },\n  setBook(title, authors, date, ISBN, id) {\n    return db.collection(\"books\").doc(id).set({ title, authors, date, ISBN }).then(() =>\n      true\n    )\n  },\n  subscribeBooks() {\n    return db.collection(\"books\")\n  },\n  deleteBook(id) {\n    return db.collection(\"books\").doc(id).delete().then(() =>\n      true\n    )\n  }\n}","export const required = value => {\n  return value ? undefined :  'Field is required';\n}\n\nexport const minLengthCreator = minLenght => value => {\n  return value.length < minLenght ?  `Minlength ${minLenght} symbols` : undefined;\n}\n\nexport const passwordsMatch = (value, allValues) => {\n  return value !== allValues.password ? 'Passwords don\\'t match' : undefined;\n}\n\nexport const passwordPattern = value => {\n  return value && !/^[а-яёa-z0-9]+$/i.test(value) ? `Invalid password should contain only letters and digits` : undefined;\n}\n\nexport const emailPattern = value => {\n  return value && !/^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/.test(value) ? `Invalid email` : undefined;\n}\n\nexport const authorsPattern = value => {\n  return value && !/^[а-яёa-z.,;-]+[а-яёa-z.,;-\\s]+$/i.test(value) ? `Invalid string\n  should contain only letters and \".,-;\"` : undefined;\n}\n\nexport const bookPattern = value => {\n  return value && !/^[а-яёa-z0-9]+/i.test(value) ? `Invalid titile` : undefined;\n}\n\nexport const dateNotFuture = value => {\n  return new Date(value) > new Date() ? 'Date can\\'t be in future' : undefined; \n}\n\nexport const onlyNumbers = value => {\n  return value && !/^[0-9]+$/.test(value) ? `Should contain only numbers` : undefined;\n}\n\nexport const ISBNDateControl = (value, allValues) => {\n  const formatChangeDate = new Date(2007, 0, 1, 0, 0, 0, 0);\n  const formDate = new Date(allValues.date);\n\n  if (formDate) {\n    if (formDate > formatChangeDate) {\n      return value.length !== 13 && 'from this date should contain 13 digits';\n    }\n\n    if (formDate <= formatChangeDate) {\n      return value.length !== 10 && 'from this date should contain 10 digits';\n    }\n  }\n}","import { authAPI } from '../firebase/firebase';\nimport { stopSubmit } from 'redux-form';\n\nconst SET_USER_DATA = 'SET_USER0DATA';\nconst TOGGLE_IS_SENDING = 'TOGGLE_IS_SENDING';\n\nconst initialState = {\n  isAuth: false,\n  isSending: false,\n  email: null\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_USER_DATA:\n      return ({\n        ...state,\n        isAuth: action.isAuth,\n        email: action.email\n      })\n    case TOGGLE_IS_SENDING:\n      return ({\n        ...state,\n        isSending: action.isSending\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setUserData = (isAuth, email) => {\n  return {\n    type: SET_USER_DATA,\n    isAuth,\n    email\n  }\n}\n\nexport const toggleIsSending = (isSending) => {\n  return {\n    type: TOGGLE_IS_SENDING,\n    isSending\n  }\n}\n\nexport const initialApp = () => dispatch => {\n  const email = localStorage.getItem('user');\n\n  if (email) {\n    dispatch(setUserData(true, email));\n  }\n}\n\nconst setLocalStorage = (email) => {\n  localStorage.setItem('user', email);\n}\n\nconst removeLocalStorage = () => {\n  localStorage.removeItem('user');\n}\n\nconst authFuncCreator = action => (email, password) => async dispatch => {\n  dispatch(toggleIsSending(true));\n  const response = await authAPI.getUser(email, password);\n\n  action(email, password, response, dispatch);\n\n  dispatch(toggleIsSending(false));\n}\n\nconst loginFunc = (email, password, response, dispatch) => {\n  if (!response.exists || response.data().password !== password) {\n    dispatch(stopSubmit('login', { _error: 'Incorrect email or password' }));\n  } else {\n    dispatch(setUserData(true, email));\n    setLocalStorage(email);\n  }\n}\n\nconst registrationFunc = async (email, password, response, dispatch) => {\n  if (response.exists) {\n    dispatch(stopSubmit('registration', { _error: 'this email is already taken' }));\n  }\n\n  if (!response.exists) {\n    await authAPI.setUser(email, password).catch(error => {\n      return dispatch(stopSubmit('registration', { _error: error }));\n    });\n\n    dispatch(setUserData(true, email));\n    setLocalStorage(email);\n  }\n}\n\nexport const login = authFuncCreator(loginFunc);\nexport const registration = authFuncCreator(registrationFunc);\n\nexport const logout = () => dispatch => {\n  dispatch(setUserData(false, null));\n  removeLocalStorage();\n}\n\nexport default authReducer;","import { initialApp } from './auth-reducer';\n\nconst INITIALIZED_SUCCESS = 'INITIALIZED-SUCCESS';\n\nconst initialState = {\n  initialized: false,\n};\n\nconst appReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case INITIALIZED_SUCCESS:\n      return ({\n        ...state,\n        initialized: true\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setInitialazedSuccess = () => {\n  return {\n    type: INITIALIZED_SUCCESS,\n  }\n}\n\nexport const initializeApp = () => async dispatch => {\n  await dispatch(initialApp())\n\n  dispatch(setInitialazedSuccess());\n}\n\nexport default appReducer;","export const getIsAuth = (state) => {\n  return state.auth.isAuth\n}\n\nexport const gerIsSendingAuth = (state) => {\n  return state.auth.isSending\n}\n\nexport const getEmail = (state) => {\n  return state.auth.email\n}\n\nexport const getIsFetching = (state) => {\n  return state.library.isFetching\n}\n\nexport const getBooksList = (state) => {\n  return state.library.books\n}\n\nexport const getDeletingInProgress = (state) => {\n  return state.library.deletingInProgress\n}\n\nexport const getActiveBook = (state) => {\n  return state.library.activeBook\n}\n\nexport const getActiveBookId = (state) => {\n  return state.library.activeBookId\n}\n\nexport const getIsSendingBook = (state) => {\n  return state.library.isSending\n}\n\nexport const getSuccessSend = (state) => {\n  return state.library.successSend\n}\n\nexport const getInitialized = (state) => {\n  return state.initial.initialized\n}\n","import React from 'react';\nimport s from './booksItem.module.css';\nimport { NavLink } from \"react-router-dom\";\n\nconst BooksItem = ({ bookInfo, deleteBook, deletingInProgress, bookId }) => {\n  return (\n    <article className={s.wrapper}>\n      <h2 className={s.title}>\n        {bookInfo.title}\n      </h2>\n      <ul className={s.list}>\n        <li className={s.item}>\n          <span className={s.field}>\n            Date of issue:\n          </span>\n          <span className={s.value}>\n            {bookInfo.date}\n          </span>\n        </li>\n        <li className={s.item}>\n          <span className={s.field}>\n            Authors:\n          </span>\n          <span className={s.value}>\n            {bookInfo.authors}\n          </span>\n        </li>\n        <li className={s.item}>\n          <span className={s.field}>\n            ISBN:\n          </span>\n          <span className={s.value}>\n            {bookInfo.ISBN}\n          </span>\n        </li>\n      </ul>\n      <div className={s.controls}>\n        <NavLink to={`/book/${bookInfo.ISBN}`} className={`btn btn-warning ${s.control}`}>\n          Edit\n        </NavLink>\n        <button\n          className={`btn btn-danger ${s.control}`}\n          disabled={deletingInProgress.some(id => id === bookId)}\n          onClick={() => deleteBook(bookId)}\n        >\n          Delete\n        </button>\n      </div>\n    </article>\n  )\n}\n\nexport default BooksItem;","import React from 'react';\nimport BooksItem from '../BookItem/BookItem';\n\nconst BooksList = ({ books, deleteBook, deletingInProgress }) => {\n  const booksItems = [];\n\n  books.forEach(book => {\n    booksItems.push(\n      <BooksItem bookInfo={book.data()} key={book.id} bookId={book.id} deleteBook={deleteBook} deletingInProgress={deletingInProgress}/>\n    )\n  })\n\n  return (\n    <ul>\n      {booksItems}\n    </ul>\n  )\n}\n\nexport default BooksList;","import React from 'react';\nimport s from './loader.module.css';\n\nexport const Loader = () => {\n  return (\n    <div className={s['lds-ring']}>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  )\n}","import React from 'react';\nimport s from './libraryPage.module.css';\nimport { NavLink } from \"react-router-dom\";\nimport BooksList from '../BooksList/BooksList';\nimport { Loader } from '../common/Loader/Loader';\n\nconst LibraryPage = ({ books, isFetching, deleteBook, deletingInProgress }) => {\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <h1 className=\"title\">\n          Library\n        </h1>\n        <NavLink to=\"/book\" className={`btn ${s['add-btn']}`}>\n          Add new book\n        </NavLink>\n        {\n          isFetching ?\n            <Loader /> :\n            <>\n              {\n                books.size > 0 ?\n                  <BooksList books={books} deleteBook={deleteBook} deletingInProgress={deletingInProgress} /> :\n                  <p className={`alert alert-warning ${s.alert}`}>\n                    There are no books yet\n                  </p>\n              }\n            </>\n        }\n      </div>\n    </section >\n  )\n}\n\nexport default LibraryPage;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getIsAuth } from '../redux/selectors';\n\nconst mapStateToPropsRedirect = (state) => {\n  return {\n    isAuth: getIsAuth(state)\n  }\n}\n\nexport const withAuthRedirect = (Component) => {\n  \n  class RedirectComponent extends React.Component { \n    render() {\n      if (!this.props.isAuth) {\n        return <Redirect to={'/auth'} />\n      }\n      \n      return <Component {...this.props} /> \n    }\n  }\n\n  return connect(mapStateToPropsRedirect)(RedirectComponent);\n}\n","import { libraryAPI } from '../firebase/firebase';\nimport { stopSubmit } from 'redux-form';\n\nconst SET_BOOKS = 'SET_BOOKS';\nconst SET_ACTIVE_BOOK = 'ET_ACTIVE_BOOK';\nconst SET_ACTIVE_BOOK_ID = 'SET_ACTIVE_BOOK_ID';\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\nconst TOGGLE_IS_DELETING_PROGRESS = 'TOGGLE_IS_DELETING_PROGRESS';\nconst TOGGLE_IS_SENDING = 'TOGGLE_IS_SENDING';\nconst TOGGLE_SUCCESS_SEND = 'TOGGLE_SUCCESS_SEND';\n\nconst initialState = {\n  books: [],\n  isFetching: true,\n  deletingInProgress: [],\n  activeBook: {},\n  activeBookId: null,\n  isSending: false,\n  successSend: false\n};\n\nconst libraryReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_BOOKS:\n      return ({\n        ...state,\n        books: action.books,\n      })\n    case SET_ACTIVE_BOOK:\n      return ({\n        ...state,\n        activeBook: action.bookInfo,\n      })\n    case SET_ACTIVE_BOOK_ID:\n      return ({\n        ...state,\n        activeBookId: action.id,\n      })\n    case TOGGLE_IS_FETCHING:\n      return ({\n        ...state,\n        isFetching: action.isFetching\n      })\n    case TOGGLE_IS_SENDING:\n      return ({\n        ...state,\n        isSending: action.isSending\n      })\n    case TOGGLE_SUCCESS_SEND:\n      return ({\n        ...state,\n        successSend: action.successSend\n      })\n    case TOGGLE_IS_DELETING_PROGRESS:\n      return ({\n        ...state,\n        deletingInProgress: action.isFetching ?\n          [...state.deletingInProgress, action.id] :\n          [...state.deletingInProgress.filter(id => id !== action.id)]\n      })\n    default:\n      return state;\n  }\n}\n\nexport const setBooks = (books) => {\n  return {\n    type: SET_BOOKS,\n    books\n  }\n}\n\nexport const setActiveBook = (bookInfo) => {\n  return {\n    type: SET_ACTIVE_BOOK,\n    bookInfo\n  }\n}\n\nexport const setActiveBookId = (id) => {\n  return {\n    type: SET_ACTIVE_BOOK_ID,\n    id\n  }\n}\n\nexport const toggleIsFetching = (isFetching) => {\n  return {\n    type: TOGGLE_IS_FETCHING,\n    isFetching\n  }\n}\n\nexport const toggleIsSending = (isSending) => {\n  return {\n    type: TOGGLE_IS_SENDING,\n    isSending\n  }\n}\n\nexport const toggleSuccessSend = (successSend) => {\n  return {\n    type: TOGGLE_SUCCESS_SEND,\n    successSend\n  }\n}\n\nexport const toggleIsDeletingProgress = (isFetching, id) => {\n  return {\n    type: TOGGLE_IS_DELETING_PROGRESS,\n    isFetching,\n    id\n  }\n}\n\nexport const toggleSubscribeBooks = () => async dispatch => {\n  await libraryAPI.subscribeBooks().onSnapshot(response => {\n    dispatch(toggleIsFetching(true));\n    dispatch(setBooks(response));\n    dispatch(toggleIsFetching(false));\n  })\n\n}\n\nexport const setBook = (title, authors, date, ISBN, id) => async dispatch => {\n  const response = await libraryAPI.setBook(title, authors, date, ISBN, id)\n\n  if (response) {\n    dispatch(toggleSuccessSend(true));\n    dispatch(toggleSuccessSend(false));\n  };\n}\n\nexport const updateBookInfo = (title, authors, date, ISBN, id) => async dispatch => {\n  dispatch(toggleIsSending(true));\n  const response = await libraryAPI.getBook(ISBN);\n\n  response.forEach(book => {\n    if (ISBN === book.data().ISBN && id !== book.id) {\n      dispatch(stopSubmit('book', { _error: 'this ISBN is already taken' }));\n    } else {\n      dispatch(setBook(title, authors, date, ISBN, id));\n      dispatch(setActiveBook(null));\n    }\n  })\n\n  if (response.size === 0) {\n    dispatch(setBook(title, authors, date, ISBN, id));\n    dispatch(setActiveBook(null));\n  }\n\n  dispatch(toggleIsSending(false));\n}\n\nexport const addNewBook = (title, authors, date, ISBN) => async dispatch => {\n  dispatch(toggleIsSending(true));\n  const response = await libraryAPI.getBook(ISBN);\n\n  if (response.size > 0) {\n    dispatch(stopSubmit('book', { _error: 'this ISBN is already taken' }));\n  } else {\n    dispatch(setBook(title, authors, date, ISBN));\n  }\n\n  dispatch(toggleIsSending(false));\n}\n\nexport const deleteBook = (id) => async dispatch => {\n  dispatch(toggleIsDeletingProgress(true, id));\n\n  await libraryAPI.deleteBook(id);\n\n  dispatch(toggleIsDeletingProgress(false, id));\n}\n\nexport const getBookInfo = (ISBN) => async dispatch => {\n  dispatch(toggleIsFetching(true));\n\n  if (!ISBN) {\n    dispatch(setActiveBook(null));\n  } else {\n    const response = await libraryAPI.getBook(ISBN);\n\n    response.forEach(book => {\n      dispatch(setActiveBookId(book.id));\n      dispatch(setActiveBook(book.data()));\n    })\n  }\n\n  setTimeout(() => {\n    dispatch(toggleIsFetching(false));\n  }, 0);\n}\n\nexport default libraryReducer;","import React from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport LibraryPage from './LibraryPage';\nimport { getIsFetching, getBooksList, getDeletingInProgress } from '../../redux/selectors';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { toggleSubscribeBooks, deleteBook } from '../../redux/library-reducer';\n\nclass LibraryPageAPIComponent extends React.Component {\n  componentDidMount() {\n    this.props.toggleSubscribeBooks();\n  }\n\n  render() {\n    return (\n      <LibraryPage\n        books={this.props.books}\n        isFetching={this.props.isFetching}\n        deleteBook={this.props.deleteBook}\n        deletingInProgress={this.props.deletingInProgress}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isFetching: getIsFetching(state),\n    books: getBooksList(state),\n    deletingInProgress: getDeletingInProgress(state)\n  }\n}\n\n\nconst mapDispatchToProps = {\n  toggleSubscribeBooks,\n  deleteBook,\n}\n\nexport default compose(\n  withAuthRedirect,\n  connect(mapStateToProps, mapDispatchToProps)\n)(LibraryPageAPIComponent);","import React from 'react';\nimport s from './formsControls.module.css';\n\nexport const Input = ({ input, meta, label, ...restProps }) => {\n  const hasError = meta.touched && meta.error;\n\n  return <div className={s['field-wrapper']}>\n    {label && <label htmlFor={restProps.id}>{label}</label>}\n    <input {...input} {...restProps} className={`form-control ${s.control}`} ></input>\n    {\n      hasError && \n      <p className=\"alert alert-danger\"> {meta.error} </p>\n    }\n  </div>\n}","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Input } from '../common/FormContols/FormControls';\nimport { required, minLengthCreator, passwordsMatch, passwordPattern, emailPattern } from '../../utils/validators';\nimport s from './authForm.module.css';\n\nconst minLength9 = minLengthCreator(9);\n\nconst AuthForm = ({ title, isLogin = false, handleSubmit, error, isSending }) => {\n  const passwordValidators = isLogin ? [required] : [required, passwordPattern, minLength9];\n  const loginValidators = isLogin ? [required] : [required, emailPattern];\n\n  return (\n    <form className={s.form} onSubmit={handleSubmit}>\n      <Field type=\"email\" name={'email'} placeholder=\"Email\" component={Input} validate={loginValidators} autoComplete=\"on\" />\n      <Field type=\"password\" name={'password'} placeholder=\"Password\" component={Input} validate={passwordValidators} autoComplete=\"off\" />\n      { !isLogin &&\n        <Field type=\"password\" name={'Repeat-password'} placeholder=\"Repeat password\" component={Input} validate={[required, passwordsMatch]} autoComplete=\"off\" />\n      }\n      {\n        error &&\n        <p className=\"alert alert-danger\">\n          {error}\n        </p>\n      }\n      <button type=\"submit\" className={`btn btn-primary ${s['submit-btn']}`} disabled={isSending}>\n        {title}\n      </button>\n    </form>\n  )\n}\n\nexport const LoginForm = reduxForm({\n  form: 'login',\n})(AuthForm);\n\nexport const RegistrationForm = reduxForm({\n  form: 'registration'\n})(AuthForm);","import React, { useState } from 'react';\nimport { LoginForm, RegistrationForm } from '../AuthForm/AuthForm';\nimport { Redirect } from 'react-router-dom';\nimport s from './authPage.module.css';\n\nconst AuthPage = ({ isAuth, login, registration, isSending }) => {\n  const [isLogin, setIsLogin] = useState(true);\n  const title = isLogin ? 'Login' : 'Registration';\n  const btnText = isLogin ? 'Registration' : 'Login';\n\n  const toggleForm = () => {\n    setIsLogin(!isLogin);\n  }\n\n  const onLogin = ({ email, password }) => {\n    login(email, password);\n  }\n\n  const onRegistrationt = ({ email, password }) => {\n    registration(email, password);\n  }\n\n  if (isAuth) {\n    return <Redirect to='/library' />\n  }\n\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <h2 className=\"title\">\n          {title}\n        </h2>\n        {\n          isLogin ?\n            <LoginForm title={title} isLogin={isLogin} onSubmit={onLogin} isSending={isSending} /> :\n            <RegistrationForm title={title} onSubmit={onRegistrationt} isSending={isSending} />\n        }\n        <button onClick={toggleForm} className={s['toggle-btn']}>\n          {btnText}\n        </button>\n      </div>\n    </section>\n  )\n}\n\nexport default AuthPage;\n","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { login, registration } from '../../redux/auth-reducer';\nimport { getIsAuth, gerIsSendingAuth } from '../../redux/selectors';\nimport AuthPage from './AuthPage';\n\nconst mapStateToProps = (state) => {\n  return {\n    isAuth: getIsAuth(state),\n    isSending: gerIsSendingAuth(state)\n  }\n}\n\nconst mapDispatchToProps = {\n  login,\n  registration\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(AuthPage);","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Input } from '../common/FormContols/FormControls';\nimport { required, authorsPattern, bookPattern, dateNotFuture, onlyNumbers, ISBNDateControl } from '../../utils/validators';\nimport s from './bookForm.module.css'\n\nconst BookForm = ({ title, handleSubmit, error, isSending }) => {\n  return (\n    <form onSubmit={handleSubmit} className={s.form}>\n      <Field type=\"text\" name={'title'} label=\"Title:\" id=\"title\" placeholder=\"Title\" component={Input} validate={[required, bookPattern]} autoComplete=\"on\" />\n      <Field type=\"text\" name={'authors'} label=\"Authors:\" id=\"Authors\" placeholder=\"Authors\" component={Input} validate={[required, authorsPattern]} autoComplete=\"on\" />\n      <Field type=\"date\" name={'date'} label=\"Date:\" id=\"Date\" placeholder=\"Date\" component={Input} validate={[required, dateNotFuture]} autoComplete=\"on\" />\n      <Field type=\"text\" name={'ISBN'} label=\"ISBN:\" id=\"ISBN\" placeholder=\"ISBN\" component={Input} validate={[required, onlyNumbers, ISBNDateControl]} autoComplete=\"on\" />\n      {\n        error &&\n        <p className=\"alert alert-danger\">\n          {error}\n        </p>\n      }\n      <button type=\"submit\" className={`btn btn-primary ${s['submit-btn']}`} disabled={isSending}>\n        {title}\n      </button>\n    </form>\n  )\n}\n\nexport default reduxForm({\n  form: 'book',\n})(BookForm);\n","import React from 'react';\nimport BookForm from '../BookForm/BookForm';\nimport { Redirect, NavLink } from 'react-router-dom';\nimport { Loader } from '../common/Loader/Loader';\n\nconst BookPage = ({ addNewBook, updateBookInfo, bookInfo, isFetching, isSending, successSend, bookId }) => {\n  const onAddNewBook = ({ title, authors, date, ISBN }) => {\n    addNewBook(title, authors, date, ISBN);\n  }\n\n  const onUpdateBookInfo = ({ title, authors, date, ISBN }) => {\n    updateBookInfo(title, authors, date, ISBN, bookId);\n  }\n\n  if (successSend) {\n    return <Redirect to='/library' />\n  }\n\n  return (\n    <section className=\"wrapper\">\n      <div className=\"container\">\n        <NavLink to=\"/library\" className=\"link-back\">\n          Back to library\n        </NavLink>\n        <h2 className=\"title\">\n          Book\n        </h2>\n        {\n          isFetching ?\n            <Loader/> :\n            <>\n              {\n                bookInfo ?\n                  <BookForm title={'Save'} onSubmit={onUpdateBookInfo} initialValues={bookInfo} isSending={isSending} /> :\n                  <BookForm title={'Add'} onSubmit={onAddNewBook} isSending={isSending} />\n              }\n            </>\n        }\n      </div>\n    </section>\n  )\n}\n\nexport default BookPage;\n","import React from 'react';\nimport BookPage from \"./BookPage\";\nimport { withRouter } from 'react-router-dom';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { addNewBook, getBookInfo, updateBookInfo } from '../../redux/library-reducer';\nimport { getActiveBook, getIsFetching, getSuccessSend, getIsSendingBook, getActiveBookId } from '../../redux/selectors';\n\nclass BookPageAPIComponent extends React.Component {\n  getActualBookData() {\n    let ISBN = this.props.match.params.ISBN;\n    this.props.getBookInfo(ISBN);\n  }\n\n  componentDidMount() {\n    this.getActualBookData()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.params.ISBN !== prevProps.match.params.ISBN) {\n      this.getActualBookData();\n    }\n  }\n\n  render() {\n    return (\n      <BookPage\n        addNewBook={this.props.addNewBook}\n        updateBookInfo={this.props.updateBookInfo}\n        bookInfo={this.props.bookInfo}\n        bookId={this.props.bookId}\n        isFetching={this.props.isFetching}\n        isSending={this.props.isSending}\n        successSend={this.props.successSend}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    bookInfo: getActiveBook(state),\n    bookId: getActiveBookId(state),\n    isFetching: getIsFetching(state),\n    isSending: getIsSendingBook(state),\n    successSend: getSuccessSend(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  getBookInfo,\n  addNewBook,\n  updateBookInfo\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withRouter,\n  withAuthRedirect\n)(BookPageAPIComponent);","import React from 'react';\nimport s from './header.module.css';\n\nconst Header = ({ isAuth, email, logout }) => {\n  return (\n    <header className={s.header}>\n      <div className={`container ${s.wrapper}`}>\n        {\n          isAuth &&\n          <>\n            <p className={s.email}>\n              {email}\n            </p>\n            <button className={s.btn} onClick={logout}>\n              logout\n            </button>\n          </>\n        }\n\n      </div>\n    </header>\n  )\n}\n\nexport default Header;","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { logout } from '../../redux/auth-reducer';\nimport { getIsAuth, getEmail } from '../../redux/selectors';\nimport Header from './Header';\n\nconst mapStateToProps = (state) => {\n  return {\n    isAuth: getIsAuth(state),\n    email: getEmail(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  logout,\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(Header);","import React from 'react';\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport LibraryPage from './components/LibraryPage/LibraryPageContainer';\nimport AuthPage from './components/AuthPage/AuthPageContainer';\nimport BookPage from './components/BookPage/BookPageContainer';\nimport Header from './components/Headerr/HeaderContainer';\n\nfunction App() {\n  return (\n    <main>\n      <Header />\n      <Switch>\n        <Route path=\"/\" exact render={() => <Redirect to={\"/library\"} />} />\n        <Route path=\"/auth\" render={() => <AuthPage />} />\n        <Route path=\"/book/:ISBN?\" render={() => <BookPage />} />\n        <Route path=\"/library\" render={() => <LibraryPage />} />\n        <Route path=\"*\" render={() => {\n          return (\n            <div className=\"container alert alert-danger not-found\">\n              404 PAGE NOT FOUND\n            </div>\n          )\n        }} />\n      </Switch>\n    </main>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { initializeApp } from './redux/app-reducer';\nimport { getInitialized } from './redux/selectors';\nimport App from './App';\nimport { Loader } from './components/common/Loader/Loader';\n\nclass AppApiComponent extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n\n  render() {\n    return (\n      this.props.initialized ?\n        <App /> :\n        <Loader />\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    initialized: getInitialized(state),\n  }\n}\n\nconst mapDispatchToProps = {\n  initializeApp\n}\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps)\n)(AppApiComponent);","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport { reducer as formReducer } from 'redux-form';\nimport thunkMiddleware from  'redux-thunk';\nimport authReducer from './auth-reducer';\nimport appReducer from './app-reducer';\nimport libraryReducer from './library-reducer';\n\nconst reducers = combineReducers({\n  initial: appReducer,\n  auth: authReducer,\n  library: libraryReducer,\n  form: formReducer\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\n\nwindow.store = store;\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './AppContainer';\nimport reportWebVitals from './reportWebVitals';\nimport store from './redux/redux-store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3mu8Z\",\"wrapper\":\"header_wrapper__1V7lE\",\"email\":\"header_email__3OWYD\",\"btn\":\"header_btn__1Oulx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"add-btn\":\"libraryPage_add-btn__1_s7r\",\"alert\":\"libraryPage_alert__3GGMk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field-wrapper\":\"formsControls_field-wrapper__3PWku\",\"control\":\"formsControls_control__2sK7d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"authForm_form__3KzO3\",\"submit-btn\":\"authForm_submit-btn__3XJEw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"bookForm_form__3jmEc\",\"submit-btn\":\"bookForm_submit-btn__2P7_4\"};"],"sourceRoot":""}